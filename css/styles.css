/* ==================== DESIGN TOKENS ==================== */
:root {
  /* OBSIDIAN — deep cosmic void: near-black with just enough blue to feel digital */
  --bg:              #050810;
  --surface:         #090e1b;
  --surface-hi:      #0e1526;
  --border:          #162030;
  --border-bright:   #1e2e46;

  /* Player identity: electric mint — unexpected in a game UI, reads as "friendly energy" */
  --player:          #00ffc2;
  --player-glow:     rgba(0, 255, 194, 0.25);
  --player-dim:      rgba(0, 255, 194, 0.07);

  /* CPU identity: rose-red — warm danger signal, distinct from the cool player side */
  --cpu:             #ff4d6d;
  --cpu-glow:        rgba(255, 77, 109, 0.25);
  --cpu-dim:         rgba(255, 77, 109, 0.07);

  /* Rock hover identity: electric blue — three choices, three distinct identities */
  --rock-color:      #4d9fff;
  --rock-glow:       rgba(77, 159, 255, 0.25);

  /* Outcome — slightly distinct from identity colors so "win" reads as a neutral event,
     not just "player color appeared" */
  --win:             #00e5a0;
  --win-bg:          rgba(0, 229, 160, 0.08);
  --win-border:      rgba(0, 229, 160, 0.22);
  --lose:            #ff4d6d;
  --lose-bg:         rgba(255, 77, 109, 0.08);
  --lose-border:     rgba(255, 77, 109, 0.22);
  --draw:            #ffd166;
  --draw-bg:         rgba(255, 209, 102, 0.08);
  --draw-border:     rgba(255, 209, 102, 0.22);

  --text:            #c8d8f5;
  --text-muted:      #384f72;
  --text-dim:        #192338;

  /* Spacing scale */
  --sp-1:  4px;
  --sp-2:  8px;
  --sp-3:  12px;
  --sp-4:  16px;
  --sp-5:  20px;
  --sp-6:  24px;
  --sp-8:  32px;
  --sp-10: 40px;
  --sp-12: 48px;

  /* Rounder radius scale — slightly softer than before for a premium feel */
  --r-sm:   8px;
  --r-md:   12px;
  --r-lg:   18px;
  --r-xl:   24px;
  --r-full: 9999px;
}

/* ==================== RESET & BASE ==================== */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Chakra Petch', sans-serif;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--sp-6) var(--sp-4);
  color: var(--text);

  /* Three-layer background: ambient mint + ambient rose glows + 45° diagonal line grid.
     Diagonal lines create dynamic tension; dot grids feel static by comparison. */
  background-color: var(--bg);
  background-image:
    radial-gradient(ellipse at 20% 70%, rgba(0, 255, 194, 0.055) 0%, transparent 52%),
    radial-gradient(ellipse at 82% 18%, rgba(255, 77, 109, 0.055) 0%, transparent 48%),
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 22px,
      rgba(255, 255, 255, 0.012) 22px,
      rgba(255, 255, 255, 0.012) 23px
    );
  background-size: 100% 100%, 100% 100%, auto;
}

/* ==================== LAYOUT ==================== */
.app {
  width: 100%;
  max-width: 440px;
  display: flex;
  flex-direction: column;
  gap: var(--sp-3);
}

/* ==================== HEADER ==================== */
.header {
  text-align: center;
  padding: 0 0 var(--sp-2);
}

.header h1 {
  font-size: clamp(1.5rem, 7vw, 1.9rem);
  font-weight: 700;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  color: var(--text);
  line-height: 1;
}

/* Dot separators carry the player identity color — threads the mint through the header
   without changing the neutral title tone */
.header h1 .dot {
  color: var(--player);
  font-weight: 400;
}

.header p {
  font-size: 0.5625rem;
  font-weight: 600;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-top: var(--sp-2);
}

/* ==================== SCOREBOARD ==================== */
.scoreboard {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  padding: var(--sp-6) var(--sp-8);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: var(--sp-4);
  position: relative;
  overflow: hidden;
}

/* 2px accent line — increased from 1px for stronger visual anchor at the panel top */
.scoreboard::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    var(--player) 0%,
    transparent 40%,
    transparent 60%,
    var(--cpu) 100%
  );
  opacity: 0.65;
}

/* Inner top glow gives the scoreboard panel perceived elevation above the background */
.scoreboard::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(
    ellipse at 50% 0%,
    rgba(255, 255, 255, 0.018) 0%,
    transparent 55%
  );
  pointer-events: none;
}

.score-block {
  display: flex;
  flex-direction: column;
  gap: var(--sp-1);
}

.score-block.player { align-items: flex-start; }
.score-block.cpu    { align-items: flex-end; }

.score-label {
  font-size: 0.5rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.2em;
}

.score-block.player .score-label { color: var(--player); opacity: 0.7; }
.score-block.cpu    .score-label { color: var(--cpu);    opacity: 0.7; }

.score-value {
  /* JetBrains Mono for scores — monospace prevents layout shift as digits change width */
  font-family: 'JetBrains Mono', monospace;
  font-size: 3.75rem;
  font-weight: 700;
  line-height: 1;
  transition: transform 0.18s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* LED-style glow layered in two radii — inner tight glow for sharpness, outer halo for atmosphere */
#player-score {
  color: var(--player);
  text-shadow:
    0 0 16px rgba(0, 255, 194, 0.6),
    0 0 40px rgba(0, 255, 194, 0.18);
}

#cpu-score {
  color: var(--cpu);
  text-shadow:
    0 0 16px rgba(255, 77, 109, 0.6),
    0 0 40px rgba(255, 77, 109, 0.18);
}

/* Overshoot-and-settle spring curve draws the eye on score change */
.score-value.bump { transform: scale(1.3); }

.score-sep {
  display: flex;
  align-items: center;
  justify-content: center;
}

.score-sep span {
  font-family: 'JetBrains Mono', monospace;
  font-size: 1.75rem;
  font-weight: 400;
  color: var(--text-dim);
}

/* ==================== ROUND PILL ==================== */
/* Lightweight context indicator between scoreboard and arena — floats, doesn't frame */
.round-pill {
  align-self: center;
  font-size: 0.5rem;
  font-weight: 700;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--text-muted);
  background: var(--surface-hi);
  border: 1px solid var(--border);
  border-radius: var(--r-full);
  padding: 5px 14px;
}

/* ==================== ARENA ==================== */
.arena {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  padding: var(--sp-8) var(--sp-6);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: var(--sp-4);
  min-height: 164px;
}

.arena-side {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--sp-2);
}

.arena-label {
  font-size: 0.5rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--text-muted);
}

.arena-choice {
  width: 90px;
  height: 90px;
  border-radius: var(--r-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
  background: var(--surface-hi);
  border: 1px solid var(--border-bright);
  transition:
    transform 0.25s ease,
    box-shadow 0.25s ease,
    border-color 0.25s ease,
    opacity 0.25s ease,
    filter 0.25s ease;
}

/* Win glow uses outcome color not player/cpu identity — "good play" is neutral, not player-branded */
.arena-choice.win {
  border-color: var(--win);
  box-shadow:
    0 0 0 2px rgba(0, 229, 160, 0.12),
    0 0 30px rgba(0, 229, 160, 0.24),
    0 0 70px rgba(0, 229, 160, 0.1);
  animation: pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.arena-choice.lose {
  border-color: var(--border);
  opacity: 0.32;
  filter: grayscale(0.4);
}

.arena-choice.draw {
  border-color: var(--draw);
  box-shadow: 0 0 24px rgba(255, 209, 102, 0.22);
}

.arena-vs {
  font-size: 0.5rem;
  font-weight: 700;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: var(--text-dim);
}

/* ==================== RESULT BADGE ==================== */
.result-badge {
  text-align: center;
  border-radius: var(--r-md);
  font-size: 0.8125rem;
  font-weight: 700;
  letter-spacing: 0.04em;
  opacity: 0;
  transform: translateY(8px) scale(0.94);
  /* Spring easing gives the badge a satisfying snap into place */
  transition: opacity 0.26s ease, transform 0.26s cubic-bezier(0.34, 1.3, 0.64, 1);
  /* Fixed height prevents layout reflow when badge toggles between rounds */
  min-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid transparent;
}

.result-badge.visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.result-badge.win  { background: var(--win-bg);  border-color: var(--win-border);  color: var(--win);  }
.result-badge.lose { background: var(--lose-bg); border-color: var(--lose-border); color: var(--lose); }
.result-badge.draw { background: var(--draw-bg); border-color: var(--draw-border); color: var(--draw); }

/* ==================== CHOICE BUTTONS ==================== */
.choices {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--sp-3);
}

.choice-btn {
  background: var(--surface);
  border: 1px solid var(--border-bright);
  border-radius: var(--r-lg);
  padding: var(--sp-6) var(--sp-2) var(--sp-5);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--sp-2);
  cursor: pointer;
  transition:
    border-color 0.2s ease,
    transform 0.18s cubic-bezier(0.34, 1.56, 0.64, 1),
    box-shadow 0.2s ease,
    background 0.2s ease;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  position: relative;
  overflow: hidden;
}

/* Top-left shimmer — adds perceived illumination without any extra DOM elements */
.choice-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.045) 0%,
    transparent 52%
  );
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
}

.choice-btn:hover::before { opacity: 1; }

/* Each choice has its own hover identity to reinforce the decision before committing */
[data-choice="rock"]:hover {
  border-color: var(--rock-color);
  background: rgba(77, 159, 255, 0.06);
  box-shadow:
    0 0 0 1px rgba(77, 159, 255, 0.12),
    0 0 26px var(--rock-glow),
    0 10px 28px rgba(0, 0, 0, 0.55);
  transform: translateY(-5px);
}

[data-choice="paper"]:hover {
  border-color: var(--player);
  background: var(--player-dim);
  box-shadow:
    0 0 0 1px rgba(0, 255, 194, 0.12),
    0 0 26px var(--player-glow),
    0 10px 28px rgba(0, 0, 0, 0.55);
  transform: translateY(-5px);
}

[data-choice="scissors"]:hover {
  border-color: var(--cpu);
  background: var(--cpu-dim);
  box-shadow:
    0 0 0 1px rgba(255, 77, 109, 0.12),
    0 0 26px var(--cpu-glow),
    0 10px 28px rgba(0, 0, 0, 0.55);
  transform: translateY(-5px);
}

/* Physical press feel — snaps down faster than it lifts to mimic real button physics */
.choice-btn:active {
  transform: translateY(0) scale(0.95) !important;
  box-shadow: none !important;
  transition: transform 0.07s ease, box-shadow 0.07s ease;
}

/* Disabled during CPU thinking — prevents round state corruption from a double click */
.choice-btn:disabled {
  opacity: 0.22;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important;
}

.choice-btn:disabled::before { display: none; }

.choice-btn .emoji {
  font-size: 2.5rem;
  line-height: 1;
  filter: drop-shadow(0 3px 8px rgba(0, 0, 0, 0.7));
  /* Emoji springs up with the button lift — reinforces the choice being "selected" */
  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.choice-btn:hover .emoji {
  transform: scale(1.14);
}

.choice-btn .name {
  font-size: 0.5rem;
  font-weight: 700;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--text-muted);
  transition: color 0.2s ease;
}

/* Name label adopts the button's identity color on hover — full compound identity signal */
[data-choice="rock"]:hover     .name { color: var(--rock-color); }
[data-choice="paper"]:hover    .name { color: var(--player); }
[data-choice="scissors"]:hover .name { color: var(--cpu); }

/* ==================== FOOTER ROW ==================== */
.footer-row {
  display: flex;
  justify-content: center;
  padding-top: var(--sp-1);
}

.reset-btn {
  background: transparent;
  border: 1px solid var(--border-bright);
  border-radius: var(--r-full);
  padding: var(--sp-2) var(--sp-8);
  font-family: 'Chakra Petch', sans-serif;
  font-size: 0.5625rem;
  font-weight: 700;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--text-muted);
  cursor: pointer;
  transition:
    background 0.18s ease,
    border-color 0.18s ease,
    color 0.18s ease,
    box-shadow 0.18s ease;
}

.reset-btn:hover {
  background: rgba(0, 255, 194, 0.04);
  border-color: var(--player);
  color: var(--player);
  box-shadow: 0 0 18px var(--player-glow);
}

/* ==================== ANIMATIONS ==================== */
@keyframes pop {
  0%   { transform: scale(0.7);  }
  60%  { transform: scale(1.12); }
  100% { transform: scale(1);    }
}

/* Rotate component added to shake — makes the losing emoji feel more physically rejected */
@keyframes shake {
  0%, 100% { transform: translateX(0)    rotate(0);      }
  15%       { transform: translateX(-7px) rotate(-1.5deg); }
  35%       { transform: translateX(7px)  rotate(1.5deg);  }
  55%       { transform: translateX(-5px) rotate(-0.8deg); }
  75%       { transform: translateX(5px)  rotate(0.8deg);  }
}

/* Thinking: scale + opacity pulse communicates active processing, not just a waiting spinner */
@keyframes thinking {
  0%, 100% { opacity: 0.2;  transform: scale(0.86); }
  50%       { opacity: 0.88; transform: scale(1.08); }
}

.arena-choice.thinking {
  animation: thinking 0.62s cubic-bezier(0.45, 0, 0.55, 1) infinite;
  border-color: var(--text-dim);
}